overrides:
  ceph-deploy:
    fs: xfs
    conf:
      client:
        log file: /var/log/ceph/ceph-$name.$pid.log
      mon:
        debug mon: 1
        debug ms: 20
        debug paxos: 20
      osd:
        debug filestore: 20
        debug journal: 20
        debug ms: 1
        debug osd: 20
        osd op thread timeout: 60
        osd sloppy crc: true
      global:
        mon pg warn min per osd: 2
        osd pool default size: 2
roles:
- - mon.a
  - osd.0
  - osd.1
  - osd.2
- - mon.b
  - osd.3
  - osd.4
  - osd.5
- - client.0
tasks:
- ssh-keys:
- ceph-deploy:
    fs: xfs
- exec:
    client.0:
      - git clone http://gitlab.osas.lab.eng.rdu2.redhat.com/ceph/ceph-qe-scripts.git
      - python ceph-qe-scripts/openstack/regression/install/Install_osp.py -pid 8a85f9823e3d5e43013e3ddd4e2a0977 -r rhel-7-server-rpms rhel-7-server-rh-common-rpms rhel-7-server-openstack-7.0-rpms
      - python ceph-qe-scripts/openstack/regression/install/configure_admin.py -ip images -vp volumes -bp backups -vmp vms
      - sudo python ceph-qe-scripts/openstack/regression/install/configure_osp.py -ip images -vp volumes -bp backups -vmp vms
      - sudo python ceph-qe-scripts/openstack/regression/test_cinder_1.py
      - sudo cp ceph-qe-scripts/openstack/osp_cleanup.sh .
      - sudo sh osp_cleanup.sh
      - sudo rm -rf osp_cleanup.sh
